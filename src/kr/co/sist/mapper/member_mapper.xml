<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.sist.member">
<select id="selectMemberList" resultType="kr.co.sist.domain.MemberList" parameterType="kr.co.sist.vo.SearchMemberVO">
	select user_id, name, inputdate, isbanned, permit_st
	from
	(
	select rownum r_num, user_id, name, inputdate, isbanned, permit_st
	from
	(select m.user_id, name, inputdate, isbanned, nvl(permit_st, '미작성') permit_st
	from mine_member m
	left join mine_portfolio p
	on m.user_id = p.user_id
	order by user_id asc)
	)
	where r_num between #{startNum} and #{endNum} 
	<if test="searchFlag == '차단된 계정'">
		and isbanned = 'Y'
	</if>
</select>
<select id="selectTotalPageCount" resultType="int">
	select count(*) cnt
	from mine_member
</select>
</mapper>